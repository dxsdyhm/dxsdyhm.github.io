<!DOCTYPE html>
<html>


<body>
<!--
<iframe src="sharetest://data/123" style="display:none"></iframe>//这里可以实现跳转到jumpAC
-->

</body>

<script LANGUAGE="JavaScript">
	var isWeixin = is_weixin();
     var jump = function(appurl){
        var g_sSchema = appurl;
        var div, tid, startTime;
        //创建iframe，呼起app schema
        startTime = Date.now(); //标记呼起时间点
        div = document.createElement('div');
        div.style.visibility = 'hidden';
        div.innerHTML = "<iframe src=" + g_sSchema + " scrolling=\"no\" width=\"1\" height=\"1\"></iframe>";
        document.body.appendChild(div);
       <!-- alert(div.innerHTML); -->
       
        <!--window.open(appurl,"_self");-->
        //如果成功呼起，setTimeout不会立即执行 	
        if(!isWeixin){
                window.setTimeout(function(){
               var delta = Date.now() - startTime;
               alert("delta:"+delta + " isW:"+ isWeixin);
               if (!isWeixin&&delta < 1500) {
                     alert("has3 not app"+delta);
                     window.location.replace("http://www.baidu.com/");
                      <!--('http://yoosee.co/','_self');-->
        	 }else{
        	  	alert("has5 app"+delta);	
        		window.history.go(-1);
        	 }
        },1000);	
        }
       }
    function is_weixin() {

		    var ua = navigator.userAgent.toLowerCase();
		    if (ua.match(/MicroMessenger/i) == "micromessenger") {
		        return true;
		    } else {
		        return false;
		    }
		}
	
	    	var winHeight = typeof window.innerHeight != 'undefined' ? window.innerHeight : document.documentElement.clientHeight;
		function loadHtml(){
			var div = document.createElement('div');
				div.id = 'weixin-tip';
				div.innerHTML = '<p><img src="http://blog.weixiaodeyu.com/static/uploads/2015/03/live_weixin.png" alt="微信打开"/></p>';
				document.body.appendChild(div);
			}
		function loadStyleText(cssText) {
	        var style = document.createElement('style');
	        style.rel = 'stylesheet';
	        style.type = 'text/css';
	        try {
	            style.appendChild(document.createTextNode(cssText));
	        } catch (e) {
	            style.styleSheet.cssText = cssText; //ie9以下
	        }
            var head=document.getElementsByTagName("head")[0]; //head标签之间加上style样式
            head.appendChild(style);
	    }
        var cssText = "#weixin-tip{position: fixed; left:0; top:0; background: rgba(0,0,0,0.8); filter:alpha(opacity=80); width: 100%; height:100%; z-index: 100;} #weixin-tip p{text-align: center; margin-top: 10%; padding:0 5%;}";
	if(isWeixin){
	     	loadHtml();
		loadStyleText(cssText);
	}else{	
		var name = getParameter("name");
		var age = getParameter("age");
		alert(name+age);
		jump('sharetest://data/123?name=wzy?&age=26');
	}
	
	function getParameter(param)
	{
		var query = window.location.search;
		var iLen = param.length;
		var iStart = query.indexOf(param);
		if (iStart == -1)
		　return "";
		iStart += iLen + 1;
		var iEnd = query.indexOf("&", iStart);
		if (iEnd == -1)
　		return query.substring(iStart);
		return query.substring(iStart, iEnd);
	}
	
</script> 
</html>
